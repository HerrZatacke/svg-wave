(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1180:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ea});var r=t(5155),a=t(2703),s=t(1942),l=t(9488),i=t(8955),o=t(6859),c=t(1686),d=t(2175),u=t(6523),p=t(533),h=t(3e3),x=t(4844),g=t(8060),m=t(8606),f=t(4782),v=t(4288),j=t(2115);function y(e){let{id:n,label:t,unitLabel:a,error:i,size:y="medium",...b}=e,w=(0,j.useId)();return n&&(w=n),(0,r.jsxs)(o.q,{allowWheelScrub:!0,...b,render:(e,n)=>(0,r.jsx)(x.A,{size:y,ref:e.ref,disabled:n.disabled,required:n.required,error:i,variant:"outlined",children:e.children}),children:[(0,r.jsx)(g.A,{htmlFor:w,children:t}),(0,r.jsx)(c.Y,{id:w,render:(e,n)=>(0,r.jsx)(m.A,{label:t,inputRef:e.ref,value:n.inputValue,onBlur:e.onBlur,onChange:e.onChange,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,onFocus:e.onFocus,slotProps:{input:e},endAdornment:(0,r.jsx)(f.A,{position:"end",children:(0,r.jsxs)(s.A,{direction:"row",alignItems:"center",gap:1,children:[a&&(0,r.jsx)(l.default,{variant:"body2",children:a}),(0,r.jsxs)(s.A,{direction:"column",gap:0,sx:{borderLeft:"1px solid",borderColor:"divider",ml:0,"& button":{py:0,flex:1,borderRadius:.5}},children:[(0,r.jsx)(d.P,{render:(0,r.jsx)(v.A,{size:y,"aria-label":"Increase"}),children:(0,r.jsx)(h.A,{fontSize:y,sx:{transform:"translateY(2px)"}})}),(0,r.jsx)(u.X,{render:(0,r.jsx)(v.A,{size:y,"aria-label":"Decrease"}),children:(0,r.jsx)(p.A,{fontSize:y,sx:{transform:"translateY(-2px)"}})})]})]})}),sx:{pr:0}})})]})}var b=t(5959),w=t(9863);let _=(0,b.v)((0,w.Zr)(e=>({width:70,height:70,holeToEdge:7,holeDiameter:4,gap:20,setWidth:n=>{e({width:n})},setHeight:n=>{e({height:n})},setGap:n=>{e({gap:n})},setHoleToEdge:n=>{e({holeToEdge:n})},setHoleDiameter:n=>{e({holeDiameter:n})}}),{name:"svg-wave-board",storage:(0,w.KU)(()=>localStorage)})),k=()=>{let e=(0,i.c)("BoardDimensions"),{width:n,height:t,gap:a,holeToEdge:l,holeDiameter:o,setWidth:c,setHeight:d,setGap:u,setHoleToEdge:p,setHoleDiameter:h}=_();return(0,r.jsxs)(s.A,{direction:"column",gap:3,children:[(0,r.jsx)(y,{label:e("width"),unitLabel:e("unitMM"),value:n,min:10,max:200,step:1,onValueChange:e=>c(e||10)}),(0,r.jsx)(y,{label:e("height"),unitLabel:e("unitMM"),value:t,min:10,max:200,step:1,onValueChange:e=>d(e||10)}),(0,r.jsx)(y,{label:e("gap"),unitLabel:e("unitMMPer100"),value:a,min:0,max:500,step:10,onValueChange:e=>u(e||0)}),(0,r.jsx)(y,{label:e("holeToEdge"),unitLabel:e("unitMM"),value:l,min:0,max:60,step:1,onValueChange:e=>p(e||0)}),(0,r.jsx)(y,{label:e("holeDiameter"),unitLabel:e("unitMM"),value:o,min:0,max:15,step:1,onValueChange:e=>h(e||0)})]})};t(4496);var A=t(4417);let C={sine:[0,33,63,90,110,123,127,123,110,90,63,33,0,223,192,166,146,133,129,133,146,166,192,223],square:[127,127,127,127,127,127,127,127,127,127,127,127,129,129,129,129,129,129,129,129,129,129,129,129],saw:[0,10,21,31,42,53,63,74,85,95,106,116,128,139,149,160,171,181,192,202,213,224,234,245],triangle:[0,21,42,64,85,106,127,106,85,64,42,21,0,235,214,193,171,150,129,150,171,193,214,235],silence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},F=t(9675).A,S=(e,n)=>({id:F(),repeats:2**e,offset:600*e-200,scale:"silence"!==n?200:1,waveData:[]}),M=e=>[...new Int8Array(e)].map(e=>(e+128)%256),B=(0,b.v)((0,w.Zr)((e,n)=>({waves:[],addRawFile:async t=>{let{waves:r}=n(),a=await Promise.all([...t].map(async e=>{let n=M(await e.arrayBuffer());return{...S(r.length+1),waveData:n}}));e({waves:[...r,...a]})},addWave:t=>{let{waves:r}=n(),a={...S(r.length+1,t),waveData:M(C[t])};e({waves:[...r,a]})},updateWave:(n,t)=>{e(e=>{let{waves:r}=e;return{waves:r.map(e=>e.id!==n?e:{...e,...t})}})},deleteWave:n=>{e(e=>{let{waves:t}=e;return{waves:t.filter(e=>e.id!==n)}})}}),{name:"svg-wave-waves",storage:(0,w.KU)(()=>localStorage)})),U=(e,n,t,r)=>{let a=e/2-r,s=n/2-r;return[{x:a,y:s,radius:t/2},{x:-a,y:s,radius:t/2},{x:-a,y:-s,radius:t/2},{x:a,y:-s,radius:t/2}]},I=e=>e.map((e,n)=>{let t,r,a;return t=n?"L":"M",r=e.x,a=e.y,"".concat(t).concat(r.toFixed(2)," ").concat(a.toFixed(2))}).join(" "),D=e=>{if(e.length<3)return[];let n=e[0],t=e[e.length-1];return n.x===t.x&&n.y===t.y?e:[...e,n]},E=(e,n)=>{let t=Math.min(10,e*n/1e3),r=e/2,a=n/2;return D([{x:r,y:0},{x:r,y:a-t},{x:r-t,y:a},{x:t-r,y:a},{x:-r,y:a-t},{x:-r,y:t-a},{x:t-r,y:-a},{x:r-t,y:-a},{x:r,y:t-a}])};var O=t(7249),P=t.n(O);let T=e=>({X:1e3*e.x,Y:1e3*e.y}),K=e=>({x:e.X/1e3,y:e.Y/1e3}),L=(e,n)=>{if(e.offset<=0||e.scale<0||e.scale>=1e4||e.repeats<=1)return null;let t=Array(e.repeats).fill([...e.waveData]).flat(),r=t.reduce((n,r,a)=>[...n,((e,n,t,r)=>{let a=e.offset/100+n*e.scale/1e4,s=Math.PI/180*(t/r*360);return{x:a*Math.cos(s),y:a*Math.sin(s)}})(e,r,a,t.length)],[]),a=e.offset/100+0*e.scale/1e4,s=e.offset/100+255*e.scale/1e4,l=r.map(T),i=new(P()).ClipperOffset;i.AddPath(l,P().JoinType.jtRound,P().EndType.etClosedPolygon);let o=[],c=[];if(i.Execute(o,1e3*n),i.Execute(c,-(1e3*n)),1===o.length&&1===c.length){let e=o[0].reverse().map(K);return{points:r,pointsInner:D(c[0].map(K)),pointsOuter:D(e),radiusInner:a,radiusOuter:s}}return{points:r,pointsInner:[],pointsOuter:[],radiusInner:0,radiusOuter:0}},N={board:"#229922",inner:"#005555",outer:"#550055",bounds:"#dddddd"},V=()=>{let e=(0,i.c)("BoardPreview"),{waves:n}=B(),{width:t,height:a,gap:o,holeDiameter:c,holeToEdge:d}=_(),u=o/200,p=U(t,a,c,d);return(0,r.jsxs)(s.A,{className:"board-preview",direction:"column",gap:1,children:[(0,r.jsx)(l.default,{variant:"body2",children:e("title")}),(0,r.jsx)(A.GT,{initialScale:1,minScale:1,maxScale:10,limitToBounds:!0,centerZoomedOut:!0,centerOnInit:!0,children:(0,r.jsx)(A.WZ,{children:(0,r.jsxs)("svg",{className:"board-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(Math.floor(-.55*t)," ").concat(Math.floor(-.55*a)," ").concat(Math.ceil(1.1*t)," ").concat(Math.ceil(1.1*a)),children:[(0,r.jsxs)("g",{fill:"none",strokeWidth:"0.125px",stroke:N.board,children:[(0,r.jsx)("polyline",{points:E(t,a).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")}),p.map((e,n)=>{let{x:t,y:a,radius:s}=e;return(0,r.jsx)("circle",{cx:t,cy:a,r:s},n)})]}),n.map(e=>{let n=L(e,u);return n?(0,r.jsxs)("g",{id:e.id,fill:"none",strokeWidth:"0.125px",children:[(0,r.jsx)("path",{className:"board-preview__path board-preview__path--inner",d:I(n.pointsInner||[]),stroke:N.inner}),(0,r.jsx)("path",{className:"board-preview__path board-preview__path--outer",d:I(n.pointsOuter||[]),stroke:N.outer}),(0,r.jsx)("circle",{cx:0,cy:0,r:n.radiusInner,stroke:N.bounds,strokeDasharray:"0.7,0.3"}),(0,r.jsx)("circle",{cx:0,cy:0,r:n.radiusOuter,stroke:N.bounds,strokeDasharray:"0.7,0.3"})]},e.id):null})]})})})]})};var W=t(7001),z=t(6205),Y=t(4647),q=t(97);let H=(e,n)=>"(xy ".concat(e.toFixed(6)," ").concat(n.toFixed(6),")"),G=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return t=>{let r="desc"===n?-1:1;return[...t].sort((n,t)=>"string"==typeof n[e]?n[e].localeCompare(t[e])*r:n[e]>t[e]?r:n[e]<t[e]?-r:0)}}("offset"),R=()=>{let e=(0,i.c)("GetBoard"),{downloadBoard:n,downloadSVG:t}=(()=>{let{waves:e}=B(),{width:n,height:t,gap:r,holeDiameter:a,holeToEdge:s}=_(),l=r/200;return{downloadBoard:(0,j.useCallback)(()=>{let r=G(e).reduce((e,n)=>{let t=L(n,l);return t?[...e,t]:e},[]);r.length&&(0,q.saveAs)(new Blob([...((e,n,t,r,a)=>{let s=e.reduce((e,n,t,r)=>0===t?[...e,{pointsInner:[],pointsOuter:n.pointsInner}]:[...e,{pointsInner:r[t-1].pointsOuter,pointsOuter:n.pointsInner}],[]);s.push({pointsInner:e[e.length-1].pointsOuter,pointsOuter:E(n,t)});let l=Math.round(1.2*n),i=Math.round(1.2*t),o=U(n,t,r,a);return"".concat((e=>'(kicad_pcb (version 20211014) (generator pcbnew)\n\n  (general\n    (thickness 1.6)\n  )\n\n  (paper "A4")\n  (layers\n    (0 "F.Cu" signal)\n    (31 "B.Cu" signal)\n    (32 "B.Adhes" user "B.Adhesive")\n    (33 "F.Adhes" user "F.Adhesive")\n    (34 "B.Paste" user)\n    (35 "F.Paste" user)\n    (36 "B.SilkS" user "B.Silkscreen")\n    (37 "F.SilkS" user "F.Silkscreen")\n    (38 "B.Mask" user)\n    (39 "F.Mask" user)\n    (40 "Dwgs.User" user "User.Drawings")\n    (41 "Cmts.User" user "User.Comments")\n    (42 "Eco1.User" user "User.Eco1")\n    (43 "Eco2.User" user "User.Eco2")\n    (44 "Edge.Cuts" user)\n    (45 "Margin" user)\n    (46 "B.CrtYd" user "B.Courtyard")\n    (47 "F.CrtYd" user "F.Courtyard")\n    (48 "B.Fab" user)\n    (49 "F.Fab" user)\n    (50 "User.1" user)\n    (51 "User.2" user)\n    (52 "User.3" user)\n    (53 "User.4" user)\n    (54 "User.5" user)\n    (55 "User.6" user)\n    (56 "User.7" user)\n    (57 "User.8" user)\n    (58 "User.9" user)\n  )\n\n  (setup\n    (pad_to_mask_clearance 0)\n    (aux_axis_origin '.concat(e.x," ").concat(e.y,")\n    (grid_origin ").concat(e.x," ").concat(e.y,')\n    (pcbplotparams\n      (layerselection 0x00010fc_ffffffff)\n      (disableapertmacros false)\n      (usegerberextensions false)\n      (usegerberattributes true)\n      (usegerberadvancedattributes true)\n      (creategerberjobfile true)\n      (svguseinch false)\n      (svgprecision 6)\n      (excludeedgelayer true)\n      (plotframeref false)\n      (viasonmask false)\n      (mode 1)\n      (useauxorigin false)\n      (hpglpennumber 1)\n      (hpglpenspeed 20)\n      (hpglpendiameter 15.000000)\n      (dxfpolygonmode true)\n      (dxfimperialunits true)\n      (dxfusepcbnewfont true)\n      (psnegative false)\n      (psa4output false)\n      (plotreference true)\n      (plotvalue true)\n      (plotinvisibletext false)\n      (sketchpadsonfab false)\n      (subtractmaskfromsilk false)\n      (outputformat 1)\n      (mirror false)\n      (drillshape 1)\n      (scaleselection 1)\n      (outputdirectory "")\n    )\n  )\n\n  (net 0 "")\n\n'))({x:l,y:i})).concat(((e,n,t,r)=>{let a=E(e,n);return"\n      (gr_poly\n        (pts\n          ".concat(a.map(e=>{let{x:n,y:a}=e;return"          ".concat(H(n+t,a+r))}).join("\n"),'\n        ) (layer "Edge.Cuts") (width 0) (fill none))\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts ').concat(H(-(e/2)+t,-(n/2)+r)," ").concat(H(e/2+t,-(n/2)+r),')\n        (height -15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts ').concat(H(-(e/2)+t,-(n/2)+r)," ").concat(H(-(e/2)+r,n/2+r),")\n        (height 15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n  ")})(n,t,l,i),"\n\n    ").concat(o.map(e=>{let{x:n,y:t,radius:r}=e;return"(gr_circle (center ".concat(n+l," ").concat(t+i,") (end ").concat(n+l," ").concat(t+r+i,') (layer "Edge.Cuts") (width 0.05) (fill none))')}).join("\n"),"\n\n    ").concat(s.map(((e,n)=>t=>{let{pointsInner:r,pointsOuter:a}=t;return'\n(zone\n    (net 0)\n    (net_name "")\n    (layer "F.Cu")\n    (hatch edge 0.5)\n    (connect_pads (clearance 0.1))\n    (min_thickness 0.254)\n    (filled_areas_thickness no)\n    (fill yes (thermal_gap 0.1) (thermal_bridge_width 0.1))\n    (polygon\n        (pts\n            '.concat(a.map(t=>{let{x:r,y:a}=t;return"".concat(H(r+e,a+n))}).join(" "),"\n        )\n    )\n    (polygon\n        (pts\n            ").concat(r.map(t=>{let{x:r,y:a}=t;return"".concat(H(r+e,a+n))}).join(" "),"\n        )\n    )\n)\n")})(l,i)).join("\n\n"),"\n\n    ").concat(e.map(((e,n)=>t=>{let{radiusInner:r,radiusOuter:a}=t;return"\n    (gr_circle\n        (center ".concat(e," ").concat(n,")\n        (end ").concat(e," ").concat(r+n,')\n        (stroke\n            (width 0.05)\n            (type dash)\n        )\n        (fill no)\n        (layer "F.SilkS")\n    )\n\n    (gr_circle\n        (center ').concat(e," ").concat(n,")\n        (end ").concat(e," ").concat(a+n,')\n        (stroke\n            (width 0.05)\n            (type dash)\n        )\n        (fill no)\n        (layer "F.SilkS")\n    )\n')})(l,i)).join("\n\n"),"\n\n)\n")})(r,n,t,a,s)]),"board.kicad_pcb")},[l,t,a,s,e,n]),downloadSVG:(0,j.useCallback)(()=>{let e=[...document.getElementsByClassName("board-preview__svg")][0];e&&(0,q.saveAs)(new Blob([e.outerHTML]),"board.svg")},[])}})();return(0,r.jsxs)(z.A,{variant:"contained",size:"large",fullWidth:!0,children:[(0,r.jsx)(Y.A,{startIcon:(0,r.jsx)(W.A,{}),title:e("longBoardTitle"),onClick:n,children:e("boardTitle")}),(0,r.jsx)(Y.A,{startIcon:(0,r.jsx)(W.A,{}),title:e("longSVGTitle"),onClick:t,children:e("svgTitle")})]})};var Z=t(6170);t(8090);let X=e=>{let{waveData:n}=e,t=n.reduce((e,n,t)=>"".concat(e," ").concat((.5+t)*6,",").concat(n),"");return(0,r.jsx)("div",{className:"wave-preview",children:(0,r.jsx)("svg",{className:"wave-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(6*n.length," 256"),children:(0,r.jsx)("polyline",{className:"wave-preview__path",points:t})})})},J=()=>{let e=(0,i.c)("Shapes"),{waves:n,updateWave:t,deleteWave:a}=B();return(0,r.jsx)(s.A,{direction:"column",gap:2,children:n.map(n=>{let{offset:l,scale:i,repeats:o,waveData:c,id:d}=n;return(0,r.jsxs)(s.A,{direction:"row",gap:2,alignItems:"center",children:[(0,r.jsx)(X,{waveData:c}),(0,r.jsx)(y,{label:e("repeats"),value:o,min:2,max:256,step:1,onValueChange:e=>{t(d,{repeats:e||2})}}),(0,r.jsx)(y,{label:e("offset"),value:l,min:0,max:1e4,step:25,onValueChange:e=>{t(d,{offset:e||0})}}),(0,r.jsx)(y,{label:e("scale"),value:i,min:0,max:1e4,step:25,onValueChange:e=>{t(d,{scale:e||0})}}),(0,r.jsx)(v.A,{onClick:()=>a(d),size:"large",title:e("delete"),children:(0,r.jsx)(Z.A,{})})]},d)})})};var Q=t(6341),$=t(1745),ee=t(6589);function en(e){let{label:n,disabled:t,title:a,onFileInputChange:s,multiple:l}=e;return(0,r.jsxs)(Y.A,{component:"label",disabled:t,title:a,children:[n,(0,r.jsx)("input",{type:"file",hidden:!0,disabled:t,multiple:l,onChange:s})]})}let et=[{translationKey:"addSine",type:"sine"},{translationKey:"addSaw",type:"saw"},{translationKey:"addSquare",type:"square"},{translationKey:"addTriangle",type:"triangle"},{translationKey:"addSilence",type:"silence"}],er=()=>{let e=(0,i.c)("ShapesMenu"),[n,t]=(0,j.useState)(!1),{addRawFile:a,addWave:l}=B();return(0,r.jsxs)(s.A,{direction:"row",gap:1,children:[(0,r.jsxs)(z.A,{size:"small",variant:"contained",fullWidth:!0,children:[et.map(n=>{let{translationKey:t,type:a}=n;return(0,r.jsx)(Y.A,{onClick:()=>l(a),title:e(t),children:e(t)},a)}),(0,r.jsx)(en,{onFileInputChange:e=>{var n;let t=e.target;(null==(n=t.files)?void 0:n.length)&&a(t.files),t.value=""},label:"Add from file",multiple:!0})]}),(0,r.jsx)($.x,{onClickAway:()=>t(!1),children:(0,r.jsx)(ee.A,{onClose:()=>t(!1),open:n,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("infoPopup"),slotProps:{popper:{disablePortal:!0}},children:(0,r.jsx)(v.A,{onClick:()=>t(e=>!e),children:(0,r.jsx)(Q.A,{})})})})]})};function ea(){let e=(0,i.c)("Home");return(0,r.jsx)(a.default,{maxWidth:"xl",sx:{pt:4},children:(0,r.jsxs)(s.A,{direction:"column",gap:4,children:[(0,r.jsx)(l.default,{variant:"h5",component:"h1",children:e("title")}),(0,r.jsx)(er,{}),(0,r.jsx)(J,{}),(0,r.jsxs)(s.A,{direction:"row",gap:4,children:[(0,r.jsx)(V,{}),(0,r.jsx)(k,{})]}),(0,r.jsx)(R,{})]})})}},4496:()=>{},8090:()=>{},8210:(e,n,t)=>{Promise.resolve().then(t.bind(t,1180))}},e=>{e.O(0,[400,802,858,784,441,255,358],()=>e(e.s=8210)),_N_E=e.O()}]);