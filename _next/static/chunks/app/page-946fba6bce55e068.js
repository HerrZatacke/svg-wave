(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{283:()=>{},4196:()=>{},4496:()=>{},7545:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>N});var s=t(5155);t(4196);var a=t(5959),r=t(9863);let l=(0,a.v)((0,r.Zr)(e=>({width:100,height:100,holeToEdge:10,holeDiameter:4,gap:30,setWidth:n=>{e({width:n})},setHeight:n=>{e({height:n})},setGap:n=>{e({gap:n})},setHoleToEdge:n=>{e({holeToEdge:n})},setHoleDiameter:n=>{e({holeDiameter:n})}}),{name:"svg-wave-board",storage:(0,r.KU)(()=>localStorage)})),i=()=>{let{width:e,height:n,gap:t,holeToEdge:a,holeDiameter:r,setWidth:i,setHeight:o,setGap:c,setHoleToEdge:d,setHoleDiameter:u}=l();return(0,s.jsxs)("div",{className:"board-dimensions",children:[(0,s.jsxs)("label",{className:"board-dimensions__label",children:[(0,s.jsx)("span",{className:"board-dimensions__label-text",children:"Width (mm)"}),(0,s.jsx)("input",{type:"number",title:"offset",className:"board-dimensions__input",value:e,min:10,max:200,step:1,onChange:e=>{let n=parseInt(e.target.value,10);i(isNaN(n)?0:n)}})]}),(0,s.jsxs)("label",{className:"board-dimensions__label",children:[(0,s.jsx)("span",{className:"board-dimensions__label-text",children:"Height (mm)"}),(0,s.jsx)("input",{type:"number",title:"offset",className:"board-dimensions__input",value:n,min:10,max:200,step:1,onChange:e=>{let n=parseInt(e.target.value,10);o(isNaN(n)?0:n)}})]}),(0,s.jsxs)("label",{className:"board-dimensions__label",children:[(0,s.jsx)("span",{className:"board-dimensions__label-text",children:"Gap (mm/100)"}),(0,s.jsx)("input",{type:"number",title:"offset",className:"board-dimensions__input",value:t,min:0,max:500,step:10,onChange:e=>{let n=parseInt(e.target.value,10);c(isNaN(n)?0:n)}})]}),(0,s.jsxs)("label",{className:"board-dimensions__label",children:[(0,s.jsx)("span",{className:"board-dimensions__label-text",children:"Hole-to-edge (mm)"}),(0,s.jsx)("input",{type:"number",title:"offset",className:"board-dimensions__input",value:a,min:0,max:60,step:1,onChange:e=>{let n=parseInt(e.target.value,10);d(isNaN(n)?0:n)}})]}),(0,s.jsxs)("label",{className:"board-dimensions__label",children:[(0,s.jsx)("span",{className:"board-dimensions__label-text",children:"Hole âŒ€ (mm)"}),(0,s.jsx)("input",{type:"number",title:"offset",className:"board-dimensions__input",value:r,min:0,max:15,step:1,onChange:e=>{let n=parseInt(e.target.value,10);u(isNaN(n)?0:n)}})]})]})};t(4496);let o={sine:[0,25,50,71,87,98,102,99,90,75,55,32,6,236,211,189,172,159,154,154,162,175,194,217,242],square:[102,102,102,102,102,102,102,102,102,102,102,102,102,153,153,153,153,153,153,153,153,153,153,153,153],saw:[0,8,16,25,33,41,50,58,66,75,83,91,100,159,168,176,184,193,201,210,218,226,235,243,251],triangle:[0,16,33,50,66,83,100,87,71,54,37,20,4,243,226,210,193,176,159,164,180,197,214,230,247],silence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};t(2115);let c=t(9675).A,d=(e,n)=>({id:c(),repeats:2**e,offset:600*e-200,scale:"silence"!==n?200:1,waveData:[]}),u=e=>[...new Int8Array(e)].map(e=>(e+128)%256),p=(0,a.v)((0,r.Zr)((e,n)=>({waves:[],addRawFile:async t=>{let{waves:s}=n(),a=await Promise.all([...t].map(async e=>{let n=u(await e.arrayBuffer());return{...d(s.length+1),waveData:n}}));e({waves:[...s,...a]})},addWave:t=>{let{waves:s}=n(),a={...d(s.length+1,t),waveData:u(o[t])};e({waves:[...s,a]})},updateWave:(n,t)=>{e(e=>{let{waves:s}=e;return{waves:s.map(e=>e.id!==n?e:{...e,...t})}})},deleteWave:n=>{e(e=>{let{waves:t}=e;return{waves:t.filter(e=>e.id!==n)}})}}),{name:"svg-wave-waves",storage:(0,r.KU)(()=>localStorage)})),m=(e,n,t,s)=>{let a=e/2-s,r=n/2-s;return[{x:a,y:r,radius:t/2},{x:-a,y:r,radius:t/2},{x:-a,y:-r,radius:t/2},{x:a,y:-r,radius:t/2}]},h=e=>e.length<1?[]:[...e,e[0]],x=(e,n)=>{let t=Math.min(10,e*n/1e3),s=e/2,a=n/2;return h([{x:s,y:0},{x:s,y:a-t},{x:s-t,y:a},{x:t-s,y:a},{x:-s,y:a-t},{x:-s,y:t-a},{x:t-s,y:-a},{x:s-t,y:-a},{x:s,y:t-a}])},_=(e,n)=>{let[{x:t,y:s},{x:a,y:r}]=e;if(a===t)return{x:t+n,y:(s+r)/2};let l={x:(t+a)/2,y:(s+r)/2},i=Math.atan((r-s)/(a-t))+Math.PI/2*Math.sign(a-t);return{x:l.x+n*Math.cos(i),y:l.y+n*Math.sin(i)}},g=(e,n)=>{if(e.offset<=0||e.scale<0||e.scale>=1e4||e.repeats<=1)return null;let t=Array(e.repeats).fill([...e.waveData]).flat(),s=Math.floor(.025*t.reduce((e,n,t,s)=>0===t?e:e+Math.abs(n-s[t-1]),0)),a=t.reduce((n,s,a)=>[...n,((e,n,t,s)=>{let a=e.offset/100+n*e.scale/1e4,r=Math.PI/180*(t/s*360);return{x:a*Math.cos(r),y:a*Math.sin(r)}})(e,s,a,t.length)],[]),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","-44 -44 88 88");let l=document.createElementNS("http://www.w3.org/2000/svg","polyline");l.setAttribute("points",h(a).map(e=>{let{x:n,y:t}=e;return"".concat(n,",").concat(t)}).join(" ")),l.setAttribute("stroke","#fff"),l.setAttribute("stroke-width","1px"),r.appendChild(l),document.body.appendChild(r);let i=l.getTotalLength(),o=Array(s).fill("").map((e,n)=>l.getPointAtLength(i/s*n));document.body.removeChild(r);let c=o.reduce((e,t,s,a)=>0===s?e:[...e,_([a[s-1],t],n)],[]),d=o.reduce((e,t,s,a)=>0===s?e:[...e,_([a[s-1],t],-n)],[]);return{points:h(a),pointsInner:h(c),pointsOuter:h(d).reverse()}},b=()=>{let{waves:e}=p(),{width:n,height:t,gap:a,holeDiameter:r,holeToEdge:i}=l(),o=a/200,c=m(n,t,r,i);return(0,s.jsx)("div",{className:"board-preview",children:(0,s.jsxs)("svg",{className:"board-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(Math.floor(-.55*n)," ").concat(Math.floor(-.55*t)," ").concat(Math.ceil(1.1*n)," ").concat(Math.ceil(1.1*t)),children:[(0,s.jsx)("polyline",{className:"board-preview__path board-preview__path--board",points:x(n,t).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")}),c.map((e,n)=>{let{x:t,y:a,radius:r}=e;return(0,s.jsx)("circle",{className:"board-preview__circle",cx:t,cy:a,r:r},n)}),e.map(e=>{let n=g(e,o);return n?(0,s.jsx)("g",{id:e.id,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("polyline",{className:"board-preview__path board-preview__path--inner",points:(n.pointsInner||[]).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")}),(0,s.jsx)("polyline",{className:"board-preview__path board-preview__path--outer",points:(n.pointsOuter||[]).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")})]})},e.id):null})]})})};t(283);var v=t(97);let f=()=>{let{waves:e}=p(),{width:n,height:t,gap:a,holeDiameter:r,holeToEdge:i}=l(),o=a/200;return(0,s.jsx)("div",{className:"get-board",children:(0,s.jsx)("button",{type:"button",className:"get-board__button",onClick:()=>{let s=e.reduce((e,n)=>{let t=g(n,o);return t?[...e,t]:e},[]);s.length&&(0,v.saveAs)(new Blob([...((e,n,t,s,a)=>{let r=e.reduce((e,n,t,s)=>0===t?[...e,{pointsInner:[],pointsOuter:n.pointsInner}]:[...e,{pointsInner:s[t-1].pointsOuter,pointsOuter:n.pointsInner}],[]);r.push({pointsInner:e[e.length-1].pointsOuter,pointsOuter:x(n,t)});let l=Math.round(1.2*n),i=Math.round(1.2*t),o=m(n,t,s,a);return"".concat((e=>'(kicad_pcb (version 20211014) (generator pcbnew)\n\n  (general\n    (thickness 1.6)\n  )\n\n  (paper "A4")\n  (layers\n    (0 "F.Cu" signal)\n    (31 "B.Cu" signal)\n    (32 "B.Adhes" user "B.Adhesive")\n    (33 "F.Adhes" user "F.Adhesive")\n    (34 "B.Paste" user)\n    (35 "F.Paste" user)\n    (36 "B.SilkS" user "B.Silkscreen")\n    (37 "F.SilkS" user "F.Silkscreen")\n    (38 "B.Mask" user)\n    (39 "F.Mask" user)\n    (40 "Dwgs.User" user "User.Drawings")\n    (41 "Cmts.User" user "User.Comments")\n    (42 "Eco1.User" user "User.Eco1")\n    (43 "Eco2.User" user "User.Eco2")\n    (44 "Edge.Cuts" user)\n    (45 "Margin" user)\n    (46 "B.CrtYd" user "B.Courtyard")\n    (47 "F.CrtYd" user "F.Courtyard")\n    (48 "B.Fab" user)\n    (49 "F.Fab" user)\n    (50 "User.1" user)\n    (51 "User.2" user)\n    (52 "User.3" user)\n    (53 "User.4" user)\n    (54 "User.5" user)\n    (55 "User.6" user)\n    (56 "User.7" user)\n    (57 "User.8" user)\n    (58 "User.9" user)\n  )\n\n  (setup\n    (pad_to_mask_clearance 0)\n    (aux_axis_origin '.concat(e.x," ").concat(e.y,")\n    (grid_origin ").concat(e.x," ").concat(e.y,')\n    (pcbplotparams\n      (layerselection 0x00010fc_ffffffff)\n      (disableapertmacros false)\n      (usegerberextensions false)\n      (usegerberattributes true)\n      (usegerberadvancedattributes true)\n      (creategerberjobfile true)\n      (svguseinch false)\n      (svgprecision 6)\n      (excludeedgelayer true)\n      (plotframeref false)\n      (viasonmask false)\n      (mode 1)\n      (useauxorigin false)\n      (hpglpennumber 1)\n      (hpglpenspeed 20)\n      (hpglpendiameter 15.000000)\n      (dxfpolygonmode true)\n      (dxfimperialunits true)\n      (dxfusepcbnewfont true)\n      (psnegative false)\n      (psa4output false)\n      (plotreference true)\n      (plotvalue true)\n      (plotinvisibletext false)\n      (sketchpadsonfab false)\n      (subtractmaskfromsilk false)\n      (outputformat 1)\n      (mirror false)\n      (drillshape 1)\n      (scaleselection 1)\n      (outputdirectory "")\n    )\n  )\n\n  (net 0 "")\n\n'))({x:l,y:i})).concat(((e,n,t,s)=>{let a=x(e,n);return"\n      (gr_poly\n        (pts\n          ".concat(a.map(e=>{let{x:n,y:a}=e;return"          (xy ".concat(n+t," ").concat(a+s,")")}).join("\n"),'\n        ) (layer "Edge.Cuts") (width 0) (fill none))\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts (xy ').concat(-(e/2)+t," ").concat(-(n/2)+s,") (xy ").concat(e/2+t," ").concat(-(n/2)+s,'))\n        (height -15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts (xy ').concat(-(e/2)+t," ").concat(-(n/2)+s,") (xy ").concat(-(e/2)+t," ").concat(n/2+s,"))\n        (height 15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n  ")})(n,t,l,i),"\n\n    ").concat(o.map(e=>{let{x:n,y:t,radius:s}=e;return"(gr_circle (center ".concat(n+l," ").concat(t+i,") (end ").concat(n+l," ").concat(t+s+i,') (layer "Edge.Cuts") (width 0.05) (fill none))')}).join("\n"),"\n\n    ").concat(r.map(e=>{let{pointsInner:n,pointsOuter:t}=e,s=[...n,...t];return'\n(zone (net 0) (net_name "") (layer "F.Cu") (hatch edge 0.508)\n      (connect_pads (clearance 0.1))\n      (min_thickness 0.254) (filled_areas_thickness no)\n      (fill yes (thermal_gap 0.1) (thermal_bridge_width 0.1))\n      (polygon\n        (pts\n          '.concat(s.map(e=>{let{x:n,y:t}=e;return"        (xy ".concat(n+l," ").concat(t+i,")")}).join("\n"),"\n        )\n      )\n    )\n")}).join("\n\n"),"\n\n)\n")})(s,n,t,r,i)]),"board.kicad_pcb")},children:"Get Board!"})})};t(9713),t(8090);let w=e=>{let{waveData:n}=e,t=n.reduce((e,n,t)=>"".concat(e," ").concat((.5+t)*6,",").concat(n),"");return(0,s.jsx)("div",{className:"wave-preview",children:(0,s.jsx)("svg",{className:"wave-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(6*n.length," 256"),children:(0,s.jsx)("polyline",{className:"wave-preview__path",points:t})})})},y=[{label:"Add Sine",type:"sine"},{label:"Add Saw",type:"saw"},{label:"Add Square",type:"square"},{label:"Add Triangle",type:"triangle"}],j=()=>{let{waves:e,addRawFile:n,addWave:t,updateWave:a,deleteWave:r}=p();return(0,s.jsxs)("div",{className:"waves",children:[(0,s.jsxs)("div",{className:"waves__buttons",children:[y.map(e=>{let{label:n,type:a}=e;return(0,s.jsx)("button",{type:"button",className:"waves__button",onClick:()=>t(a),title:n,children:n},a)}),(0,s.jsxs)("label",{className:"waves__add-file waves__button",htmlFor:"add-file",title:"Must be raw signed 8-bit",children:[(0,s.jsx)("span",{children:"Add from file"}),(0,s.jsx)("input",{type:"file",id:"add-file",multiple:!0,onChange:e=>{var t;let s=e.target;(null==(t=s.files)?void 0:t.length)&&n(s.files),s.value=""}})]})]}),(0,s.jsx)("ul",{className:"waves__list",children:e.map(e=>{let{offset:n,scale:t,repeats:l,waveData:i,id:o}=e;return(0,s.jsxs)("div",{className:"waves__list-item",children:[(0,s.jsx)(w,{waveData:i}),(0,s.jsxs)("label",{className:"waves__label",children:[(0,s.jsx)("span",{children:"Repeats"}),(0,s.jsx)("input",{type:"number",title:"repeats",value:l,onChange:e=>{let n=parseInt(e.target.value,10);a(o,{repeats:isNaN(n)?0:n})}})]}),(0,s.jsxs)("label",{className:"waves__label",children:[(0,s.jsx)("span",{children:"Offset"}),(0,s.jsx)("input",{type:"number",title:"offset",value:n,min:0,max:1e4,step:25,onChange:e=>{let n=parseInt(e.target.value,10);a(o,{offset:isNaN(n)?0:n})}})]}),(0,s.jsxs)("label",{className:"waves__label",children:[(0,s.jsx)("span",{children:"Scale"}),(0,s.jsx)("input",{type:"number",title:"scale",value:t,min:0,max:1e4,step:25,onChange:e=>{let n=parseInt(e.target.value,10);a(o,{scale:isNaN(n)?0:n})}})]}),(0,s.jsx)("button",{type:"button",onClick:()=>r(o),children:"Delete"})]},o)})})]})};function N(){return(0,s.jsxs)("div",{className:"app",children:[(0,s.jsx)("h2",{className:"app__title",children:"SVG-Wave"}),(0,s.jsx)(j,{}),(0,s.jsxs)("div",{className:"app__cols",children:[(0,s.jsx)(b,{}),(0,s.jsx)(i,{})]}),(0,s.jsx)(f,{})]})}},8090:()=>{},8210:(e,n,t)=>{Promise.resolve().then(t.bind(t,7545))},9713:()=>{}},e=>{e.O(0,[892,351,441,255,358],()=>e(e.s=8210)),_N_E=e.O()}]);