(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4496:()=>{},5194:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Y});var a=t(5155),r=t(2703),s=t(1942),l=t(9488),i=t(6859),o=t(1686),c=t(2175),d=t(6523),u=t(533),p=t(3e3),h=t(4844),x=t(8060),m=t(2720),g=t(4782),f=t(4288),v=t(2115);function b(e){let{id:n,label:t,unitLabel:r,error:b,size:w="medium",...y}=e,j=(0,v.useId)();return n&&(j=n),(0,a.jsxs)(i.q,{allowWheelScrub:!0,...y,render:(e,n)=>(0,a.jsx)(h.A,{size:w,ref:e.ref,disabled:n.disabled,required:n.required,error:b,variant:"outlined",children:e.children}),children:[(0,a.jsx)(x.A,{htmlFor:j,children:t}),(0,a.jsx)(o.Y,{id:j,render:(e,n)=>(0,a.jsx)(m.A,{label:t,inputRef:e.ref,value:n.inputValue,onBlur:e.onBlur,onChange:e.onChange,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,onFocus:e.onFocus,slotProps:{input:e},endAdornment:(0,a.jsx)(g.A,{position:"end",children:(0,a.jsxs)(s.A,{direction:"row",alignItems:"center",gap:1,children:[r&&(0,a.jsx)(l.A,{variant:"body2",children:r}),(0,a.jsxs)(s.A,{direction:"column",gap:0,sx:{borderLeft:"1px solid",borderColor:"divider",ml:0,"& button":{py:0,flex:1,borderRadius:.5}},children:[(0,a.jsx)(c.P,{render:(0,a.jsx)(f.A,{size:w,"aria-label":"Increase"}),children:(0,a.jsx)(p.A,{fontSize:w,sx:{transform:"translateY(2px)"}})}),(0,a.jsx)(d.X,{render:(0,a.jsx)(f.A,{size:w,"aria-label":"Decrease"}),children:(0,a.jsx)(u.A,{fontSize:w,sx:{transform:"translateY(-2px)"}})})]})]})}),sx:{pr:0}})})]})}var w=t(5959),y=t(9863);let j=(0,w.v)((0,y.Zr)(e=>({width:100,height:100,holeToEdge:10,holeDiameter:4,gap:30,setWidth:n=>{e({width:n})},setHeight:n=>{e({height:n})},setGap:n=>{e({gap:n})},setHoleToEdge:n=>{e({holeToEdge:n})},setHoleDiameter:n=>{e({holeDiameter:n})}}),{name:"svg-wave-board",storage:(0,y.KU)(()=>localStorage)})),_=()=>{let{width:e,height:n,gap:t,holeToEdge:r,holeDiameter:l,setWidth:i,setHeight:o,setGap:c,setHoleToEdge:d,setHoleDiameter:u}=j();return(0,a.jsxs)(s.A,{direction:"column",gap:3,children:[(0,a.jsx)(b,{label:"Width",unitLabel:"mm",value:e,min:10,max:200,step:1,onValueChange:e=>i(e||10)}),(0,a.jsx)(b,{label:"Height",unitLabel:"mm",value:n,min:10,max:200,step:1,onValueChange:e=>o(e||10)}),(0,a.jsx)(b,{label:"Gap",unitLabel:"mm/100",value:t,min:0,max:500,step:10,onValueChange:e=>c(e||0)}),(0,a.jsx)(b,{label:"Hole-to-edge",unitLabel:"mm",value:r,min:0,max:60,step:1,onValueChange:e=>d(e||0)}),(0,a.jsx)(b,{label:"Hole âŒ€",unitLabel:"mm",value:l,min:0,max:15,step:1,onValueChange:e=>u(e||0)})]})};t(4496);var A=t(4417);let C={sine:[0,25,50,71,87,98,102,99,90,75,55,32,6,236,211,189,172,159,154,154,162,175,194,217,242],square:[102,102,102,102,102,102,102,102,102,102,102,102,102,153,153,153,153,153,153,153,153,153,153,153,153],saw:[0,8,16,25,33,41,50,58,66,75,83,91,100,159,168,176,184,193,201,210,218,226,235,243,251],triangle:[0,16,33,50,66,83,100,87,71,54,37,20,4,243,226,210,193,176,159,164,180,197,214,230,247],silence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},k=t(9675).A,F=(e,n)=>({id:k(),repeats:2**e,offset:600*e-200,scale:"silence"!==n?200:1,waveData:[]}),U=e=>[...new Int8Array(e)].map(e=>(e+128)%256),M=(0,w.v)((0,y.Zr)((e,n)=>({waves:[],addRawFile:async t=>{let{waves:a}=n(),r=await Promise.all([...t].map(async e=>{let n=U(await e.arrayBuffer());return{...F(a.length+1),waveData:n}}));e({waves:[...a,...r]})},addWave:t=>{let{waves:a}=n(),r={...F(a.length+1,t),waveData:U(C[t])};e({waves:[...a,r]})},updateWave:(n,t)=>{e(e=>{let{waves:a}=e;return{waves:a.map(e=>e.id!==n?e:{...e,...t})}})},deleteWave:n=>{e(e=>{let{waves:t}=e;return{waves:t.filter(e=>e.id!==n)}})}}),{name:"svg-wave-waves",storage:(0,y.KU)(()=>localStorage)})),S=(e,n,t,a)=>{let r=e/2-a,s=n/2-a;return[{x:r,y:s,radius:t/2},{x:-r,y:s,radius:t/2},{x:-r,y:-s,radius:t/2},{x:r,y:-s,radius:t/2}]},B=e=>e.length<1?[]:[...e,e[0]],I=(e,n)=>{let t=Math.min(10,e*n/1e3),a=e/2,r=n/2;return B([{x:a,y:0},{x:a,y:r-t},{x:a-t,y:r},{x:t-a,y:r},{x:-a,y:r-t},{x:-a,y:t-r},{x:t-a,y:-r},{x:a-t,y:-r},{x:a,y:t-r}])},D=(e,n)=>{let[{x:t,y:a},{x:r,y:s}]=e;if(r===t)return{x:t+n,y:(a+s)/2};let l={x:(t+r)/2,y:(a+s)/2},i=Math.atan((s-a)/(r-t))+Math.PI/2*Math.sign(r-t);return{x:l.x+n*Math.cos(i),y:l.y+n*Math.sin(i)}},E=(e,n)=>{if(e.offset<=0||e.scale<0||e.scale>=1e4||e.repeats<=1)return null;let t=Array(e.repeats).fill([...e.waveData]).flat(),a=Math.max(300,Math.min(1200,2*t.length)),r=t.reduce((n,a,r)=>[...n,((e,n,t,a)=>{let r=e.offset/100+n*e.scale/1e4,s=Math.PI/180*(t/a*360);return{x:r*Math.cos(s),y:r*Math.sin(s)}})(e,a,r,t.length)],[]),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","-44 -44 88 88");let l=document.createElementNS("http://www.w3.org/2000/svg","polyline");l.setAttribute("points",B(r).map(e=>{let{x:n,y:t}=e;return"".concat(n,",").concat(t)}).join(" ")),l.setAttribute("stroke","#fff"),l.setAttribute("stroke-width","1px"),s.appendChild(l),document.body.appendChild(s);let i=l.getTotalLength(),o=Array(a).fill("").map((e,n)=>l.getPointAtLength(i/a*n));document.body.removeChild(s);let c=o.reduce((e,t,a,r)=>0===a?e:[...e,D([r[a-1],t],n)],[]),d=o.reduce((e,t,a,r)=>0===a?e:[...e,D([r[a-1],t],-n)],[]);return{points:B(r),pointsInner:B(c),pointsOuter:B(d).reverse()}},N=()=>{let{waves:e}=M(),{width:n,height:t,gap:r,holeDiameter:s,holeToEdge:l}=j(),i=r/200,o=S(n,t,s,l);return(0,a.jsx)("div",{className:"board-preview",children:(0,a.jsx)(A.GT,{initialScale:1,minScale:1,maxScale:10,limitToBounds:!0,centerZoomedOut:!0,centerOnInit:!0,children:(0,a.jsx)(A.WZ,{children:(0,a.jsxs)("svg",{className:"board-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(Math.floor(-.55*n)," ").concat(Math.floor(-.55*t)," ").concat(Math.ceil(1.1*n)," ").concat(Math.ceil(1.1*t)),children:[(0,a.jsx)("polyline",{className:"board-preview__path board-preview__path--board",points:I(n,t).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")}),o.map((e,n)=>{let{x:t,y:r,radius:s}=e;return(0,a.jsx)("circle",{className:"board-preview__circle",cx:t,cy:r,r:s},n)}),e.map(e=>{let n=E(e,i);return n?(0,a.jsx)("g",{id:e.id,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("polyline",{className:"board-preview__path board-preview__path--inner",points:(n.pointsInner||[]).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")}),(0,a.jsx)("polyline",{className:"board-preview__path board-preview__path--outer",points:(n.pointsOuter||[]).map(e=>{let{x:n,y:t}=e;return"".concat(n.toFixed(3),",").concat(t.toFixed(3))}).join(" ")})]})},e.id):null})]})})})})};var O=t(4647),W=t(97);let z=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return t=>{let a="desc"===n?-1:1;return[...t].sort((n,t)=>"string"==typeof n[e]?n[e].localeCompare(t[e])*a:n[e]>t[e]?a:n[e]<t[e]?-a:0)}}("offset"),P=()=>{let{waves:e}=M(),{width:n,height:t,gap:r,holeDiameter:s,holeToEdge:l}=j(),i=r/200;return(0,a.jsx)(O.A,{variant:"contained",size:"large",onClick:()=>{let a=z(e).reduce((e,n)=>{let t=E(n,i);return t?[...e,t]:e},[]);a.length&&(0,W.saveAs)(new Blob([...((e,n,t,a,r)=>{let s=e.reduce((e,n,t,a)=>0===t?[...e,{pointsInner:[],pointsOuter:n.pointsInner}]:[...e,{pointsInner:a[t-1].pointsOuter,pointsOuter:n.pointsInner}],[]);s.push({pointsInner:e[e.length-1].pointsOuter,pointsOuter:I(n,t)});let l=Math.round(1.2*n),i=Math.round(1.2*t),o=S(n,t,a,r);return"".concat((e=>'(kicad_pcb (version 20211014) (generator pcbnew)\n\n  (general\n    (thickness 1.6)\n  )\n\n  (paper "A4")\n  (layers\n    (0 "F.Cu" signal)\n    (31 "B.Cu" signal)\n    (32 "B.Adhes" user "B.Adhesive")\n    (33 "F.Adhes" user "F.Adhesive")\n    (34 "B.Paste" user)\n    (35 "F.Paste" user)\n    (36 "B.SilkS" user "B.Silkscreen")\n    (37 "F.SilkS" user "F.Silkscreen")\n    (38 "B.Mask" user)\n    (39 "F.Mask" user)\n    (40 "Dwgs.User" user "User.Drawings")\n    (41 "Cmts.User" user "User.Comments")\n    (42 "Eco1.User" user "User.Eco1")\n    (43 "Eco2.User" user "User.Eco2")\n    (44 "Edge.Cuts" user)\n    (45 "Margin" user)\n    (46 "B.CrtYd" user "B.Courtyard")\n    (47 "F.CrtYd" user "F.Courtyard")\n    (48 "B.Fab" user)\n    (49 "F.Fab" user)\n    (50 "User.1" user)\n    (51 "User.2" user)\n    (52 "User.3" user)\n    (53 "User.4" user)\n    (54 "User.5" user)\n    (55 "User.6" user)\n    (56 "User.7" user)\n    (57 "User.8" user)\n    (58 "User.9" user)\n  )\n\n  (setup\n    (pad_to_mask_clearance 0)\n    (aux_axis_origin '.concat(e.x," ").concat(e.y,")\n    (grid_origin ").concat(e.x," ").concat(e.y,')\n    (pcbplotparams\n      (layerselection 0x00010fc_ffffffff)\n      (disableapertmacros false)\n      (usegerberextensions false)\n      (usegerberattributes true)\n      (usegerberadvancedattributes true)\n      (creategerberjobfile true)\n      (svguseinch false)\n      (svgprecision 6)\n      (excludeedgelayer true)\n      (plotframeref false)\n      (viasonmask false)\n      (mode 1)\n      (useauxorigin false)\n      (hpglpennumber 1)\n      (hpglpenspeed 20)\n      (hpglpendiameter 15.000000)\n      (dxfpolygonmode true)\n      (dxfimperialunits true)\n      (dxfusepcbnewfont true)\n      (psnegative false)\n      (psa4output false)\n      (plotreference true)\n      (plotvalue true)\n      (plotinvisibletext false)\n      (sketchpadsonfab false)\n      (subtractmaskfromsilk false)\n      (outputformat 1)\n      (mirror false)\n      (drillshape 1)\n      (scaleselection 1)\n      (outputdirectory "")\n    )\n  )\n\n  (net 0 "")\n\n'))({x:l,y:i})).concat(((e,n,t,a)=>{let r=I(e,n);return"\n      (gr_poly\n        (pts\n          ".concat(r.map(e=>{let{x:n,y:r}=e;return"          (xy ".concat(n+t," ").concat(r+a,")")}).join("\n"),'\n        ) (layer "Edge.Cuts") (width 0) (fill none))\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts (xy ').concat(-(e/2)+t," ").concat(-(n/2)+a,") (xy ").concat(e/2+t," ").concat(-(n/2)+a,'))\n        (height -15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n      (dimension (type aligned) (layer "Dwgs.User")\n        (pts (xy ').concat(-(e/2)+t," ").concat(-(n/2)+a,") (xy ").concat(-(e/2)+t," ").concat(n/2+a,"))\n        (height 15)\n        (format (units 3) (units_format 1) (precision 4))\n        (style (thickness 0.2) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)\n      )\n\n  ")})(n,t,l,i),"\n\n    ").concat(o.map(e=>{let{x:n,y:t,radius:a}=e;return"(gr_circle (center ".concat(n+l," ").concat(t+i,") (end ").concat(n+l," ").concat(t+a+i,') (layer "Edge.Cuts") (width 0.05) (fill none))')}).join("\n"),"\n\n    ").concat(s.map(e=>{let{pointsInner:n,pointsOuter:t}=e,a=[...n,...t];return'\n(zone (net 0) (net_name "") (layer "F.Cu") (hatch edge 0.508)\n      (connect_pads (clearance 0.1))\n      (min_thickness 0.254) (filled_areas_thickness no)\n      (fill yes (thermal_gap 0.1) (thermal_bridge_width 0.1))\n      (polygon\n        (pts\n          '.concat(a.map(e=>{let{x:n,y:t}=e;return"        (xy ".concat(n+l," ").concat(t+i,")")}).join("\n"),"\n        )\n      )\n    )\n")}).join("\n\n"),"\n\n)\n")})(a,n,t,s,l)]),"board.kicad_pcb")},children:"Get Board!"})};t(8090);let V=e=>{let{waveData:n}=e,t=n.reduce((e,n,t)=>"".concat(e," ").concat((.5+t)*6,",").concat(n),"");return(0,a.jsx)("div",{className:"wave-preview",children:(0,a.jsx)("svg",{className:"wave-preview__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(6*n.length," 256"),children:(0,a.jsx)("polyline",{className:"wave-preview__path",points:t})})})},L=()=>{let{waves:e,updateWave:n,deleteWave:t}=M();return(0,a.jsx)(s.A,{direction:"column",gap:2,children:e.map(e=>{let{offset:r,scale:l,repeats:i,waveData:o,id:c}=e;return(0,a.jsxs)(s.A,{direction:"row",gap:2,alignItems:"center",children:[(0,a.jsx)(V,{waveData:o}),(0,a.jsx)(b,{label:"Repeats",value:i,min:2,max:80,step:1,onValueChange:e=>{n(c,{repeats:e||2})}}),(0,a.jsx)(b,{label:"Offset",value:r,min:0,max:1e4,step:25,onValueChange:e=>{n(c,{offset:e||0})}}),(0,a.jsx)(b,{label:"Scale",value:l,min:0,max:1e4,step:25,onValueChange:e=>{n(c,{scale:e||0})}}),(0,a.jsx)(O.A,{onClick:()=>t(c),variant:"contained",size:"medium",children:"Delete"})]},c)})})};var T=t(6205);function q(e){let{label:n,disabled:t,title:r,onFileInputChange:s,multiple:l}=e;return(0,a.jsxs)(O.A,{component:"label",disabled:t,title:r,children:[n,(0,a.jsx)("input",{type:"file",hidden:!0,disabled:t,multiple:l,onChange:s})]})}let H=[{label:"Add Sine",type:"sine"},{label:"Add Saw",type:"saw"},{label:"Add Square",type:"square"},{label:"Add Triangle",type:"triangle"},{label:"Add Silence",type:"silence"}],K=()=>{let{addRawFile:e,addWave:n}=M();return(0,a.jsxs)(T.A,{size:"large",variant:"contained",fullWidth:!0,children:[H.map(e=>{let{label:t,type:r}=e;return(0,a.jsx)(O.A,{onClick:()=>n(r),title:t,children:t},r)}),(0,a.jsx)(q,{onFileInputChange:n=>{var t;let a=n.target;(null==(t=a.files)?void 0:t.length)&&e(a.files),a.value=""},label:"Add from file",title:"Must be raw signed 8-bit",multiple:!0})]})};function Y(){return(0,a.jsx)(r.A,{maxWidth:"xl",sx:{pt:4},children:(0,a.jsxs)(s.A,{direction:"column",gap:4,children:[(0,a.jsx)(l.A,{variant:"h4",component:"h1",children:"Wave Thingy"}),(0,a.jsx)(K,{}),(0,a.jsx)(L,{}),(0,a.jsxs)(s.A,{direction:"row",gap:4,children:[(0,a.jsx)(N,{}),(0,a.jsx)(_,{})]}),(0,a.jsx)(P,{})]})})}},8090:()=>{},8210:(e,n,t)=>{Promise.resolve().then(t.bind(t,5194))}},e=>{e.O(0,[400,263,939,441,255,358],()=>e(e.s=8210)),_N_E=e.O()}]);